webpackJsonp([4],{"2p4x":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Gu7T"),n=a.n(i),s=a("Xxa5"),l=a.n(s),r=a("exGp"),o=a.n(r),c=a("qj7D"),u=a.n(c),d={data:function(){return{item:{defaultFlag:0},index:-1}},methods:{setItem:function(t,e){this.item=t,this.index=e,console.log(t)},onChangeSwitch:function(t){this.item.defaultFlag=t?1:0},submit:function(){this.item.actionName?this.item.linkURL?this.$emit("callback",this.item,this.index):this.$message.warning("URL地址不能为空"):this.$message.warning("接口名称不能为空")},closedialog:function(){this.$emit("close")}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ps_ab"},[a("div",{staticClass:"ps_flex",staticStyle:{padding:"0px","border-radius":"10px"}},[a("div",{staticClass:"dialog-title flexrow flexac flexsb"},[t._v("新增接口\n      "),a("a-icon",{attrs:{type:"close"},on:{click:t.closedialog}})],1),t._v(" "),a("div",{staticClass:"flexrow flex_f item_menu",staticStyle:{"margin-top":"20px"}},[a("a",{staticStyle:{color:"#FF0033"}},[t._v("*")]),t._v(" "),a("div",{staticClass:"item-title_menu"},[t._v("接口名称：")]),t._v(" "),a("a-input",{model:{value:t.item.actionName,callback:function(e){t.$set(t.item,"actionName",e)},expression:"item.actionName"}})],1),t._v(" "),a("div",{staticClass:"flexrow flex_f item_menu"},[a("a",{staticStyle:{color:"#FF0033"}},[t._v("*")]),t._v(" "),a("div",{staticClass:"item-title_menu"},[t._v("URL地址：")]),t._v(" "),a("a-input",{model:{value:t.item.linkURL,callback:function(e){t.$set(t.item,"linkURL",e)},expression:"item.linkURL"}})],1),t._v(" "),a("div",{staticClass:"flexrow flex_f item_menu"},[a("a",{staticStyle:{color:"#FFFFFF"}},[t._v("*")]),t._v(" "),a("div",{staticClass:"item-title_menu"},[t._v("是否默认：")]),t._v(" "),a("a-switch",{on:{change:t.onChangeSwitch},model:{value:1==t.item.defaultFlag,callback:function(e){t.$set(t.item,"defaultFlag==1",e)},expression:"item.defaultFlag==1"}})],1),t._v(" "),a("a-button",{staticStyle:{"margin-top":"120px","margin-bottom":"30px"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("确定")])],1)])},staticRenderFns:[]};var h={components:{isAdd:a("VU/8")(d,m,!1,function(t){a("Js77")},null,null).exports},inject:["reload"],data:function(){return{dictionaryColumns:u.a.data.adddictionaryColumns,menuValue:"子系统",menuName:"",menuType:1e3,remark:"",num:0,menuTypeList:["子系统","子栏目","子菜单","页签","按钮"],empowerDefault:"默认拥有类",empowerList:[{key:0,name:"默认拥有类"},{key:1,name:"系统配置类"},{key:2,name:"客户授权类"},{key:3,name:"均可操作类"}],authFlag:0,authList:[],loading:!1,imageUrl:"",isAdd:!1,menuId:"",cacheData:{},parentName:"",showAddDialog:!1,grade:-1}},created:function(){this.menuId=this.$route.query.id,this.isAdd=this.$route.query.add,this.parentName=this.$route.query.name,this.grade=this.$route.query.grade,"false"==this.isAdd&&this.getMenuInfo()},methods:{closeDialog:function(){this.showAddDialog=!1},addCallback:function(t,e){-1==e?this.authList.push(t):this.authList.concat(t,e),(t.defaultFlag||1==this.authList.length)&&this.changeAutoListState(this.authList.length-1),this.closeDialog()},onChangeConfig:function(t){this.num=this.remark.length},getMenuInfo:function(){var t=this;return o()(l.a.mark(function e(){var a,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={menuId:t.menuId},e.next=3,t.$http.post(t.$api.menudetail,a);case 3:"10000"==(i=e.sent).data.resultCode&&(t.cacheData=i.data.data,t.setShowData());case 5:case"end":return e.stop()}},e,t)}))()},setShowData:function(){this.menuName=this.cacheData.menuName,this.remark=this.cacheData.remark,"true"==this.isAdd&&(this.menuName="",this.remark="")},confirmDelete:function(t){this.authList.splice(t,1)},handleChangeImage:function(t){var e,a,i,n=this;"uploading"!==t.file.status?("done"===t.file.status&&(e=t.file.originFileObj,a=function(t){n.imageUrl=t,n.loading=!1},(i=new FileReader).addEventListener("load",function(){return a(i.result)}),i.readAsDataURL(e)),console.log(this.imageUrl,88999,t)):this.loading=!0},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image/jpg"===t.type;e||this.$message.error("只能上传jpeg,jpg,png格式的图片");var a=t.size/1024/1024<2;return a||this.$message.error("图片大小不能超过2MB!"),e&&a},editAction:function(t,e){this.$refs.add.setItem(t,e),this.showAddDialog=!0},onChange1:function(t){this.menuName=t.target.value,"子系统"==this.menuName?this.menuType=1e3:"子栏目"==this.menuName?this.menuType=2e3:"子菜单"==this.menuName?this.menuType=3e3:"页签"==this.menuName?this.menuType=4e3:"按钮"==this.menuName&&(this.menuType=5e3)},handleSelectChange:function(t){this.authFlag=t},handleChange:function(t,e,a){var i=[].concat(n()(this.authList)),s=i.filter(function(t){return e===t.key})[0];s&&(s[a]=t,this.authList=i)},onChangeSwitch:function(t){this.changeAutoListState(t)},submit:function(){var t=this;return o()(l.a.mark(function e(){var a,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.menuName){e.next=3;break}return t.$message.warning("菜单名称不能为空"),e.abrupt("return");case 3:if(t.imageUrl){e.next=6;break}return t.$message.warning("菜单图标不能为空"),e.abrupt("return");case 6:if(!(t.authList.length<=0)){e.next=9;break}return t.$message.warning("鉴权接口不能为空"),e.abrupt("return");case 9:return a={menuId:"true"==t.isAdd?"":t.menuId,parentId:"true"==t.isAdd?t.menuId:t.cacheData.parentId,menuName:t.menuName,menuType:t.menuType,authFlag:t.authFlag,menuIcon:"未填",grade:t.grade,operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId,authList:t.authList,remark:t.remark},e.next=12,t.$http.post(t.$api.menuform,a);case 12:1e4==(i=e.sent).data.resultCode?(t.$message.success(i.data.resultMsg),t.$router.go(-1)):t.$message.error(i.data.resultMsg);case 14:case"end":return e.stop()}},e,t)}))()},changeAutoListState:function(t){for(var e=0;e<this.authList.length;e++){var a=this.authList[e];a.defaultFlag=t==e?1:0,this.$set(this.authList,e,a)}}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flexcolumn",staticStyle:{"background-color":"#FFFFFF"}},[a("div",{staticStyle:{margin:"0 auto"}},[a("div",{staticClass:"flexrow flexac edit_item_menu"},[a("div",{staticClass:"edit_item_menu_title3_menu"},[t._v("上级名称:")]),t._v(" "),a("div",{staticClass:"edit_a_input_menu",staticStyle:{"background-color":"#f5f5f5",border:"1px solid #dcdcdc"}},[t._v(t._s(t.cacheData.parentName?t.cacheData.parentName:t.parentName))]),t._v(" "),a("div",{staticClass:"edit_item_menu_toast"},[t._v("注：不可选")])]),t._v(" "),a("div",{staticClass:"flexrow flexac edit_item_menu"},[t._m(0),t._v(" "),a("div",{staticClass:"edit_a_input_menu"},[a("a-input",{attrs:{maxLength:50,placeholder:"50字以内，中文汉字、英文字母、数字、英文下划线、中英文小括号"},model:{value:t.menuName,callback:function(e){t.menuName=e},expression:"menuName"}})],1)]),t._v(" "),a("div",{staticClass:"flexrow flexac edit_item_menu"},[a("div",{staticClass:"edit_item_menu_title3_menu"},[t._v("菜单等级:")]),t._v(" "),a("div",{staticClass:"edit_a_input_menu"},[a("a-input",{attrs:{disabled:"",placeholder:"50字以内，中文汉字、英文字母、数字、英文下划线、中英文小括号"},model:{value:t.grade,callback:function(e){t.grade=e},expression:"grade"}})],1)]),t._v(" "),a("div",{staticClass:"flexrow flexac edit_item_menu"},[t._m(1),t._v(" "),a("a-radio-group",{attrs:{options:t.menuTypeList,"default-value":t.menuValue},on:{change:t.onChange1}}),t._v(" "),a("br")],1),t._v(" "),a("div",{staticClass:"flexrow flexac edit_item_menu"},[t._m(2),t._v(" "),a("a-select",{staticStyle:{width:"100%","margin-right":"80px"},attrs:{"default-value":t.empowerDefault},on:{change:t.handleSelectChange}},t._l(t.empowerList,function(e,i){return a("a-select-option",{key:i,attrs:{value:e.key}},[t._v("\n            "+t._s(e.name)+"\n          ")])}),1)],1),t._v(" "),a("div",{staticClass:"flexrow flexac edit_item_menu"},[t._m(3),t._v(" "),a("div",{staticClass:"isupload"},[a("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:"http://192.168.3.101:8808/upload","before-upload":t.beforeUpload},on:{change:t.handleChangeImage}},[t.imageUrl?a("img",{attrs:{src:t.imageUrl,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),t._v(" "),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1)]),t._v(" "),a("div",{staticClass:"col_red"},[t._v("支持PNG、JPEG、JPG格式，1KB至2M")])],1)]),t._v(" "),a("div",{staticClass:"flexrow flexac edit_item_menu"},[a("div",{staticClass:"edit_item_menu_title3_menu"},[t._v("菜单描述:")]),t._v(" "),a("div",{staticStyle:{position:"relative",width:"667px"}},[a("a-textarea",{staticClass:"edit_a_input_menu",attrs:{rows:5,maxLength:250,placeholder:"请输入描述"},on:{change:t.onChangeConfig},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}}),t._v(" "),a("div",{staticClass:"edit_number_menu"},[t._v(t._s(t.num)+"/250")])],1)]),t._v(" "),t._m(4),t._v(" "),a("a-table",{attrs:{columns:t.dictionaryColumns,"data-source":t.authList,pagination:!1,bordered:!0,size:"small"},scopedSlots:t._u([{key:"defaultFlag",fn:function(e,i,n){return[a("a-switch",{on:{change:function(e){return t.onChangeSwitch(n)}},model:{value:1==i.defaultFlag,callback:function(e){t.$set(i,"defaultFlag==1",e)},expression:"record.defaultFlag==1"}})]}},{key:"operation",fn:function(e,i,n){return[a("div",{staticClass:"flexrow flexac flexjc"},[a("a",{staticStyle:{"font-size":"12px"},attrs:{href:"#"},on:{click:function(e){return t.editAction(i,n)}}},[t._v("编辑")]),t._v(" "),a("div",{staticClass:"item-line"}),t._v(" "),a("a-popconfirm",{attrs:{title:"确定删除？","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(e){return t.confirmDelete(n)}}},[a("a",{staticStyle:{color:"#FF0000","font-size":"12px"},attrs:{href:"#"}},[t._v("删除")])])],1)]}}])}),t._v(" "),a("div",{staticClass:"flexrow edit_item_menu_title3_menu",staticStyle:{"margin-top":"10px","justify-item":"flex-start","margin-bottom":"50px","font-size":"16px"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.editAction({},-1)}}},[t._v("新增行")])],1),t._v(" "),a("div",{staticClass:"flexrow flexjc ",staticStyle:{"margin-top":"30px","margin-bottom":"80px"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("保存")]),t._v(" "),a("a-button",{staticStyle:{"margin-left":"50px"},on:{click:t.getMenuInfo}},[t._v("重置")])],1)],1),t._v(" "),a("is-add",{directives:[{name:"show",rawName:"v-show",value:t.showAddDialog,expression:"showAddDialog"}],ref:"add",on:{close:t.closeDialog,callback:t.addCallback}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"edit_item_menu_title3_menu"},[e("a",{staticStyle:{color:"#FF0000"}},[this._v("*")]),this._v("菜单名称:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"edit_item_menu_title3_menu"},[e("a",{staticStyle:{color:"#FF0000"}},[this._v("*")]),this._v("菜单类型:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"edit_item_menu_title3_menu"},[e("a",{staticStyle:{color:"#FF0000"}},[this._v("*")]),this._v("授权类型:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"edit_item_menu_title3_menu"},[e("a",{staticStyle:{color:"#FF0000"}},[this._v("*")]),this._v("菜单图标:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flexrow edit_item_menu_title3_menu",staticStyle:{width:"100%","margin-top":"40px","justify-item":"flex-start","margin-bottom":"10px","font-size":"16px"}},[e("a",{staticStyle:{color:"#FF0000"}},[this._v("*")]),this._v("鉴权接口")])}]};var f=a("VU/8")(h,_,!1,function(t){a("pKXN")},null,null);e.default=f.exports},Js77:function(t,e){},pKXN:function(t,e){},qj7D:function(t,e){t.exports={data:{dictionaryColumns:[{title:"序号",width:"80px",align:"center",ellipsis:!0,scopedSlots:{customRender:"index"}},{title:"菜单名称",align:"center",dataIndex:"menuName",ellipsis:!0},{title:"菜单类型",align:"center",dataIndex:"menuTypeName",ellipsis:!0},{title:"菜单等级",align:"center",dataIndex:"grade",ellipsis:!0},{title:"上级名称",align:"center",dataIndex:"parentName",ellipsis:!0},{title:"授权类型",align:"center",dataIndex:"authFlag",ellipsis:!0,scopedSlots:{customRender:"authFlag"}},{title:"菜单图标",align:"center",dataIndex:"menuIcon",ellipsis:!0},{title:"操作",align:"center",width:"160px",scopedSlots:{customRender:"operation"}}],adddictionaryColumns:[{title:"接口名称",dataIndex:"actionName",width:"25%",align:"center",scopedSlots:{customRender:"actionName"}},{title:"URL地址",dataIndex:"linkURL",width:"25%",align:"center",scopedSlots:{customRender:"linkURL"}},{title:"是否默认",dataIndex:"defaultFlag",width:"25%",align:"center",scopedSlots:{customRender:"defaultFlag"}},{title:"编辑",dataIndex:"operation",width:"25%",align:"center",scopedSlots:{customRender:"operation"}}]}}}});