webpackJsonp([30],{bbz1:function(t,e){},uJfA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),i=a("exGp"),o=a.n(i),n={components:{isLeft:a("c/w/").a},data:function(){var t=this;return{rowSelection:{onChange:function(t,e){console.log("selectedRowKeys: "+t,"selectedRows: ",e)},onSelect:function(e,a,s){console.log(e,a,s,88888),t.form.customerIdList=[];for(var r=0;r<s.length;r++)t.form.customerIdList.push(s[r].customerId);console.log(t.form.customerIdList,66666666666)},onSelectAll:function(e,a,s){t.form.customerIdList=[];for(var r=0;r<a.length;r++)t.form.customerIdList.push(a[r].customerId);console.log(t.form.customerIdList,77777777777)}},tablecolumns:[{width:58,align:"center",title:"序号",dataIndex:"customerId",key:"customerId",ellipsis:!0},{width:141,align:"center",title:"客户全称",dataIndex:"customerName",key:"customerName",ellipsis:!0},{width:141,align:"center",title:"客户简称",dataIndex:"shortName",key:"shortName",ellipsis:!0},{width:141,align:"center",title:"客户状态",dataIndex:"statusCode",key:"statusCode",ellipsis:!0}],tabledata:[],treedata:"",replaceFields:{title:"name",key:"id"},tabletype:!1,defaultExpandedKeys:[],data:"",showtree:!1,treeprame:{accountId:"",operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId},listparam:{operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId,accountId:""},istotal:{type:1},form:{customerIdList:[],accountId:"",remark:"",operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId}}},created:function(){this.gettree(),this.getlist()},methods:{getlist:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.tabletype=!1,e.next=3,t.$http.post(t.$api.customeraccountmylist,t.listparam);case 3:"10000"==(a=e.sent).data.resultCode?(t.tabledata=a.data.data,t.istotal.type++,t.tabletype=!0):t.$message.error(a.data.resultMsg);case 5:case"end":return e.stop()}},e,t)}))()},gettree:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.showtree=!1,e.next=3,t.$http.post(t.$api.persontree,t.treeprame);case 3:"10000"==(a=e.sent).data.resultCode?t.data=a.data.data:t.$message.error(a.data.resultMsg),t.setdata(),t.showtree=!0,t.form.accountId=t.treedata[0].id;case 8:case"end":return e.stop()}},e,t)}))()},getform:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.form.customerIdList.length){e.next=2;break}return e.abrupt("return",t.$message.error("请选择授权客户"));case 2:return e.next=4,t.$http.post(t.$api.customeraccountform,t.form);case 4:"10000"==(a=e.sent).data.resultCode?t.$message.success(a.data.resultMsg):t.$message.error(a.data.resultMsg);case 6:case"end":return e.stop()}},e,t)}))()},toTree:function(t){var e=[];if(!Array.isArray(t))return e;t.forEach(function(t){delete t.children});var a={};return t.forEach(function(t){a[t.id]=t}),t.forEach(function(t){var s=a[t.pid];s?(s.children||(s.children=[])).push(t):e.push(t)}),e},setdata:function(){for(var t=0;t<this.data.length;t++)1==this.data[t].open&&this.defaultExpandedKeys.push(this.data[t].id);this.treedata=this.toTree(this.data)},getsearchdata:function(t){this.issearchdata=t,this.getareatree(),""!=t&&(this.filterdata=[],this.setfilltertree(this.treedata,this.issearchdata))},setfilltertree:function(t,e){for(var a in t){-1!=(t[a].name+"").search(this.issearchdata)&&this.filterdata.push(t[a]),t[a].children&&this.setfilltertree(t[a].children)}this.treedata=this.toTree(this.filterdata)},getselectdata:function(t){this.form.accountId=t.id}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex_f father"},[a("div",{staticClass:"isleft"},[a("div",{staticClass:"left_title"},[t._v("系统帐号")]),t._v(" "),t.showtree?a("is-left",{attrs:{treedata:t.treedata,replaceFields:t.replaceFields,defaultExpandedKeys:t.defaultExpandedKeys},on:{selectdata:t.getselectdata,searchdata:t.getsearchdata}}):t._e()],1),t._v(" "),a("div",{staticClass:"isright"},[a("div",{staticClass:"left_title"},[t._v("客户列表")]),t._v(" "),a("div",{staticClass:"tree_box"},[a("a-table",{attrs:{columns:t.tablecolumns,"data-source":t.tabledata,bordered:"","row-selection":t.rowSelection,pagination:!1}})],1),t._v(" "),a("div",{staticClass:"r_b"},[a("div",{staticClass:"r_b_title"},[t._v("授权描述:")]),t._v(" "),a("div",{staticClass:"rb_text"},[a("a-textarea",{attrs:{placeholder:"Basic usage",rows:5},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),a("div",{staticClass:"flex_a rb_b"},[a("div",{staticClass:"flex_f"},[a("div",{staticClass:"cancel_btn rb_b_btn"},[t._v("取消")]),t._v(" "),a("div",{staticClass:"ok_btn",on:{click:function(e){return t.getform()}}},[t._v("授权")])])])])])])},staticRenderFns:[]};var d=a("VU/8")(n,c,!1,function(t){a("bbz1")},"data-v-f2e6c410",null);e.default=d.exports}});