webpackJsonp([24],{Eeuc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),n=a("exGp"),r=a.n(n),d=a("PjgT"),o=a.n(d),c={data:function(){return{dictionaryColumns:o.a.data.adddictionaryColumns,typeName:"",typeCode:"",remark:"",num:0,typeList:[],selectedRowKeys:[],id:""}},created:function(){this.id=this.$route.query.id,this.id?this.getBrandInfo():this.getTypeList()},methods:{reset:function(){this.id?this.getBrandInfo():(this.typeName="",this.typeCode="",this.remark="",this.selectedRowKeys=[])},submit:function(){var e=this;return r()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.typeName){t.next=3;break}return e.$message.warning("品牌名称不能为空"),t.abrupt("return");case 3:if(e.typeCode){t.next=6;break}return e.$message.warning("品牌代码不能为空"),t.abrupt("return");case 6:if(!(e.selectedRowKeys.length<=0)){t.next=9;break}return e.$message.warning("请关联设备类型"),t.abrupt("return");case 9:return a={brandId:""==e.id?"":e.id,brandName:e.typeName,brandCode:e.typeCode,operatorId:"5172dadd6d7c404e8ac657f32f81d969",remark:e.remark,typeIds:e.getTypeListIds()},t.next=12,e.$http.post(e.$api.devicebrandsform,a);case 12:1e4==(i=t.sent).data.resultCode?(e.id||e.$router.go(-1),e.$message.success(i.data.resultMsg)):e.$message.error(i.data.resultMsg);case 14:case"end":return t.stop()}},t,e)}))()},onChangeConfig:function(e){this.num=this.remark.length},getTypeListIds:function(){for(var e=[],t=0;t<this.selectedRowKeys.length;t++)e.push(this.typeList[this.selectedRowKeys[t]].deviceTypeId);return e},getBrandInfo:function(){var e=this;return r()(s.a.mark(function t(){var a,i,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={brandId:e.id},t.next=3,e.$http.post(e.$api.devicebrandsdetail,a);case 3:if(1e4==(i=t.sent).data.resultCode){if(e.typeName=i.data.data.brandName,e.typeCode=i.data.data.brandCode,e.remark=i.data.data.remark,e.typeList=i.data.data.deviceTypeList,e.typeList.length>0)for(e.selectedRowKeys=[],e,n=0;n<e.typeList.length;n++)e.typeList[n].select&&e.selectedRowKeys.push(n)}else e.$message.error(i.data.resultMsg);case 5:case"end":return t.stop()}},t,e)}))()},onSelectChange:function(e){this.selectedRowKeys=e},getTypeList:function(){var e=this;return r()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={keyword:"",serviceType:"",pageIndex:1,pageSize:200},t.next=3,e.$http.post(e.$api.devicetypepage,a);case 3:1e4==(i=t.sent).data.resultCode?e.typeList=i.data.data.list:e.typeList=[];case 5:case"end":return t.stop()}},t,e)}))()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flexcolumn",staticStyle:{"background-color":"#FFFFFF"}},[a("div",{staticStyle:{margin:"0 auto"}},[a("div",{staticClass:"flexrow flexac edit_item_brand"},[e._m(0),e._v(" "),a("div",{staticClass:"edit_a_input_brand"},[a("a-input",{attrs:{placeholder:"平台"},model:{value:e.typeName,callback:function(t){e.typeName=t},expression:"typeName"}})],1),e._v(" "),a("div",{staticClass:"edit_item_brand_toast"},[e._v("注：50字以内，中文汉字、英文字母、数字、英文下划线、中英文小括号")])]),e._v(" "),a("div",{staticClass:"flexrow flexac edit_item_brand"},[e._m(1),e._v(" "),a("div",{staticClass:"edit_a_input_brand"},[a("a-input",{attrs:{placeholder:"50字以内，中文汉字、英文字母、数字、英文下划线、中英文小括号"},model:{value:e.typeCode,callback:function(t){e.typeCode=t},expression:"typeCode"}})],1),e._v(" "),a("div",{staticClass:"edit_item_brand_toast"},[e._v("注：50字以内，中文汉字、英文字母、数字、英文下划线、中英文小括号")])]),e._v(" "),a("div",{staticClass:"flexrow flexac edit_item_brand"},[a("div",{staticClass:"edit_item_brand_title3"},[e._v("品牌描述:")]),e._v(" "),a("div",{staticStyle:{position:"relative",width:"667px"}},[a("a-textarea",{staticClass:"edit_a_input_brand",attrs:{rows:5,maxLength:250,placeholder:"请输入描述"},on:{change:e.onChangeConfig},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}}),e._v(" "),a("div",{staticClass:"edit_number"},[e._v(e._s(e.num)+"/250")])],1)]),e._v(" "),e._m(2),e._v(" "),a("a-table",{attrs:{columns:e.dictionaryColumns,"data-source":e.typeList,pagination:!1,bordered:!0,size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"index",fn:function(t,a,i){return[e._v("\n        "+e._s(i+1)+"\n      ")]}}])}),e._v(" "),a("div",{staticClass:"flexrow flexjc",staticStyle:{"margin-top":"30px","margin-bottom":"100px"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")]),e._v(" "),a("a-button",{staticStyle:{"margin-left":"60px"},on:{change:e.reset}},[e._v("重置")])],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"edit_item_brand_title3"},[t("a",{staticStyle:{color:"#FF0000"}},[this._v("*")]),this._v("品牌名称:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"edit_item_brand_title3"},[t("a",{staticStyle:{color:"#FF0000"}},[this._v("*")]),this._v("品牌代码:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flexrow edit_item_brand_title3",staticStyle:{width:"100%","margin-top":"40px","justify-item":"flex-start","margin-bottom":"10px","font-size":"16px"}},[t("a",{staticStyle:{color:"#FF0000"}},[this._v("*")]),this._v("设备类型")])}]};var p=a("VU/8")(c,l,!1,function(e){a("UuiG")},null,null);t.default=p.exports},PjgT:function(e,t){e.exports={data:{dictionaryColumns:[{title:"序号",width:"80px",align:"center",ellipsis:!0,scopedSlots:{customRender:"index"}},{title:"品牌名称",align:"center",dataIndex:"brandName",ellipsis:!0},{title:"品牌代码",align:"center",dataIndex:"brandCode",ellipsis:!0},{title:"设备类型数量",align:"center",dataIndex:"typeTotal",ellipsis:!0},{title:"设备型号数量",align:"center",dataIndex:"modelTotal",ellipsis:!0},{title:"操作",align:"center",width:"320px",scopedSlots:{customRender:"operation"}}],adddictionaryColumns:[{title:"序号",scopedSlots:{customRender:"index"},width:"80px",align:"center"},{title:"类型名称",dataIndex:"deviceTypeName",align:"center"},{title:"类型代码",dataIndex:"deviceTypeCode",align:"center"}]}}},UuiG:function(e,t){}});