webpackJsonp([2],{djUy:function(t,e){},eOuO:function(t,e){},mnU0:function(t,e){t.exports={data:{tableTitle:[{title:"序号",width:"80px",dataIndex:"index",align:"center",ellipsis:!0,scopedSlots:{customRender:"index"}},{title:"菜单序号",align:"center",ellipsis:!0,dataIndex:"menuId"},{title:"接口名称",align:"center",ellipsis:!0,dataIndex:"actionName"},{title:"结果代码",align:"center",ellipsis:!0,dataIndex:"resultCode"},{title:"接口耗时(毫秒)",align:"center",ellipsis:!0,dataIndex:"timeTotal"},{title:"操作账号",align:"center",ellipsis:!0,dataIndex:"entityId"},{title:"请求时间",align:"center",ellipsis:!0,dataIndex:"requestTime"},{title:"操作",align:"center",width:"160px",ellipsis:!0,scopedSlots:{customRender:"operation"}}],adddictionaryColumns:[{title:"数值名称",dataIndex:"className",width:"25%",align:"center",scopedSlots:{customRender:"className"}},{title:"数值代码",dataIndex:"classCode",width:"25%",align:"center",scopedSlots:{customRender:"classCode"}},{title:"数值描述",dataIndex:"remark",width:"25%",align:"center",scopedSlots:{customRender:"remark"}},{title:"操作",dataIndex:"operation",width:"25%",align:"center",scopedSlots:{customRender:"operation"}}]}}},z0xq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),s=a("exGp"),r=a.n(s),l=a("c/w/"),o=a("mnU0"),d=a.n(o),c={data:function(){return{item:{}}},methods:{setItem:function(t){var e=this;return r()(n.a.mark(function a(){var i,s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={logId:t.logId},a.next=3,e.$http.post(e.$api.journaldetail,i);case 3:1e4==(s=a.sent).data.resultCode&&(e.item=s.data.data);case 5:case"end":return a.stop()}},a,e)}))()},sure:function(){this.$emit("confirm")}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ps_ab"},[a("div",{staticClass:"ps_flex",staticStyle:{padding:"0px","border-radius":"10px"}},[a("div",{staticClass:"dialog-title flexrow flexac flexsb"},[t._v("日志详情\n      "),a("a-icon",{attrs:{type:"close"},on:{click:t.sure}})],1),t._v(" "),a("div",{staticClass:"flexcolumn",staticStyle:{"align-items":"flex-start","padding-left":"50px","margin-top":"30px"}},[a("div",{staticClass:"item-title"},[t._v("菜单序号:"+t._s(t.item.menuId))]),t._v(" "),a("div",{staticClass:"item-title"},[t._v("接口地址:"+t._s(t.item.actionURI))]),t._v(" "),a("div",{staticClass:"item-title"},[t._v("结果代码:"+t._s(t.item.resultCode))]),t._v(" "),a("div",{staticClass:"item-title"},[t._v("结果消息:"+t._s(t.item.resultMsg))]),t._v(" "),a("div",{staticClass:"item-title"},[t._v("客户序号:"+t._s(t.item.customerId))]),t._v(" "),a("div",{staticClass:"item-title"},[t._v("参数集合:"+t._s(t.item.dataJson))]),t._v(" "),a("div",{staticClass:"item-title"},[t._v("接口耗时:"+t._s(t.item.timeTotal))]),t._v(" "),a("div",{staticClass:"item-title"},[t._v("来源地址:"+t._s(t.item.remoteIP))]),t._v(" "),a("div",{staticClass:"item-title"},[t._v("服务地址:"+t._s(t.item.menuId))]),t._v(" "),a("div",{staticClass:"item-title"},[t._v("操作帐号:"+t._s(t.item.accountId))]),t._v(" "),a("div",{staticClass:"item-title"},[t._v("请求时间:"+t._s(t.item.requestTime))]),t._v(" "),a("div",{staticClass:"item-title"},[t._v("入库时间:"+t._s(t.item.insertTime))])]),t._v(" "),a("a-button",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"},attrs:{type:"primary"},on:{click:t.sure}},[t._v("确定")])],1)])},staticRenderFns:[]};var m=a("VU/8")(c,u,!1,function(t){a("djUy")},null,null).exports,p=a("PJh5"),f={components:{isDetail:m},data:function(){return{isShow:!1,tableTitle:d.a.data.tableTitle,tableList:[],keyword:"",dateFormat:"YYYY-MM-DD",monthFormat:"YYYY/MM",pagination:{total:0,size:"default",current:1,pageSize:20,showSizeChanger:!0,pageSizeOptions:["10","20","30","40"],showQuickJumper:!0,showTotal:function(t){return"共有 "+t+" 条数据"}},timeValue:["",""],parentItem:null,pageSize:20,pageIndex:1}},methods:{moment:a.n(p).a,onChange:function(t,e){this.timeValue=e},handleTableChange:function(t){this.pagination.pageSize=t.pageSize,this.pagination.current=t.current,this.getTableData()},cleanTxt:function(){this.keyword="",this.timeValue=["",""],this.getTableData()},getDictionnaryInfo:function(t){this.parentItem=t,this.getTableData()},getTableData:function(){var t=this;return r()(n.a.mark(function e(){var a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={actionName:t.keyword,pageSize:t.pagination.pageSize,startTime:t.timeValue[0].replaceAll("/","-"),endTime:t.timeValue[1].replaceAll("/","-"),pageIndex:t.pagination.current},e.next=3,t.$http.post(t.$api.journalpage,a);case 3:"10000"==(i=e.sent).data.resultCode?(t.tableList=i.data.data.list,1==t.pagination.current&&(t.pagination.total=i.data.data.length),t.$forceUpdate()):t.tableList=[];case 5:case"end":return e.stop()}},e,t)}))()},detail:function(t){this.$refs.detail.setItem(t),this.isShow=!0},confirm:function(){this.isShow=!1}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content2"},[a("div",{staticClass:"flexrow flexac flexsb",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"flexrow flexac"},[a("div",{staticClass:"title_tx"},[t._v("接口名称/操作账号:")]),t._v(" "),a("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"接口名称/操作账号"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),a("div",{staticClass:"title_tx"},[t._v("请求时间:")]),t._v(" "),a("a-range-picker",{attrs:{ranges:{Today:[t.moment(),t.moment()],"This Month":[t.moment(),t.moment().endOf("month")]},"show-time":"",value:t.timeValue,placeholder:["开始时间","结束时间"],format:"YYYY/MM/DD HH:mm:ss"},on:{change:t.onChange}}),t._v(" "),a("a-button",{staticClass:"title_btn",attrs:{type:"primary"},on:{click:function(e){return t.getTableData()}}},[t._v("查询")]),t._v(" "),a("a-button",{on:{click:t.cleanTxt}},[t._v("清除")])],1)]),t._v(" "),a("a-table",{attrs:{scroll:{y:700},columns:t.tableTitle,"data-source":t.tableList,bordered:"",size:"small",pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"index",fn:function(e,a,i){return[t._v(t._s(i+1+10*(t.pagination.current-1)))]}},{key:"operation",fn:function(e,i){return[a("div",{staticClass:"flexrow flexac flexjc"},[a("a",{staticStyle:{"font-size":"12px"},attrs:{href:"#"},on:{click:function(e){return t.detail(i)}}},[t._v("详情")])])]}}])}),t._v(" "),a("is-detail",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],ref:"detail",on:{confirm:t.confirm}})],1)},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(t){a("zfjk")},null,null).exports,g={components:{isLeft:l.a,isList:h},data:function(){return{showtree:!1,treedata:null,isselectdata:"",replaceFields:{title:"name",key:"id"},defaultExpandedKeys:[],data:""}},created:function(){this.getdictionarytree()},methods:{addDictionary:function(){this.isShowAddDictionary=!this.isShowAddDictionary},getdictionarytree:function(){var t=this;return r()(n.a.mark(function e(){var a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.showtree=!1,a={},e.next=4,t.$http.post(t.$api.dictionarytree,a);case 4:i=e.sent,console.log("-----------",i),"10000"==i.data.resultCode&&(t.data=i.data.data),t.setdata(),t.showtree=!0,console.log(t.treedata),t.getselectdata(t.treedata[0]);case 11:case"end":return e.stop()}},e,t)}))()},toTree:function(t){var e=[];if(!Array.isArray(t))return e;t.forEach(function(t){delete t.children});var a={};return t.forEach(function(t){a[t.id]=t}),t.forEach(function(t){var i=a[t.pid];i?(i.children||(i.children=[])).push(t):e.push(t)}),e},setdata:function(){for(var t=0;t<this.data.length;t++)1==this.data[t].open&&this.defaultExpandedKeys.push(this.data[t].id);this.treedata=this.toTree(this.data)},getselectdata:function(t){this.isselectdata=t,t&&this.$refs.dictionarylist.getDictionnaryInfo(t)}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"administrativedivision flex_fs"},[t.showtree?a("is-left",{attrs:{treedata:t.treedata,replaceFields:t.replaceFields,defaultExpandedKeys:t.defaultExpandedKeys},on:{selectdata:t.getselectdata}}):t._e(),t._v(" "),a("div",{staticClass:"flexcolumn",staticStyle:{width:"100%",padding:"20px"}},[a("is-list",{directives:[{name:"show",rawName:"v-show",value:t.isselectdata,expression:"isselectdata"}],ref:"dictionarylist",on:{refreshtree:t.getdictionarytree}})],1)],1)},staticRenderFns:[]};var x=a("VU/8")(g,_,!1,function(t){a("eOuO")},"data-v-bd294f5a",null);e.default=x.exports},zfjk:function(t,e){}});