webpackJsonp([51],{"z+8N":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),n=a("exGp"),i=a.n(n),o={inject:["reload"],components:{isLeft:a("vP0l").a},data:function(){var e=this;return{rowClick:function(t){return{on:{click:function(){console.log(t,"record"),e.listparam.customerId=t.customerId,"wechat"==e.listtype&&e.getwechatlist(),"sms"==e.listtype&&e.getsmslist(),"email"==e.listtype&&e.getemaillist()}}}},tablecolumns:[{width:58,align:"center",title:"序号",dataIndex:"customerId",key:"customerId",ellipsis:!0},{width:141,align:"center",title:"客户简称",dataIndex:"shortName",key:"shortName",ellipsis:!0},{width:141,align:"center",title:"客户状态",dataIndex:"statusCode",key:"statusCode",ellipsis:!0,scopedSlots:{customRender:"statusCode"}}],tabledata:[],tablecolumns2:[{width:58,align:"center",title:"序号",dataIndex:"wechatConfigId",key:"wechatConfigId",ellipsis:!0},{width:141,align:"center",title:"微信帐号别名",dataIndex:"wechatConfigName",key:"wechatConfigName",ellipsis:!0}],tabledata2:[],tablecolumns3:[{width:58,align:"center",title:"序号",dataIndex:"smsConfigId",key:"smsConfigId",ellipsis:!0},{width:141,align:"center",title:"短信帐号别名",dataIndex:"smsConfigName",key:"smsConfigName",ellipsis:!0}],tabledata3:[],tablecolumns4:[{width:58,align:"center",title:"序号",dataIndex:"emailConfigId",key:"emailConfigId",ellipsis:!0},{width:141,align:"center",title:"邮箱帐号别名",dataIndex:"emailConfigName",key:"emailConfigName",ellipsis:!0}],tabledata4:[],listparam:{operatorId:"1",customerId:""},selectedRowKeys:[],selectedRowKeys2:[],selectedRowKeys3:[],selectedRowKeys4:[],listtype:"wechat",tabletype:!1,form:{customerId:"",wechatConfigId:[],smsConfigId:[],emailConfigId:[],remark:"",operatorId:"1"}}},created:function(){this.getlist(),this.getwechatlist()},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},methods:{getlist:function(){var e=this;return i()(r.a.mark(function t(){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$api.customeraccountmylist,e.listparam);case 2:if("10000"!=(a=t.sent).data.resultCode){t.next=8;break}for(s=0;s<a.data.data.length;s++)1==a.data.data[s].statusCode&&e.tabledata.push(a.data.data[s]);e.listparam.customerId=e.tabledata[0].customerId,t.next=9;break;case 8:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 9:case"end":return t.stop()}},t,e)}))()},getemailform:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.emailConfigId=e.tabledata4[e.selectedRowKeys4[0]].emailConfigId,t.next=3,e.$http.post(e.$api.customeremailform,e.form);case 3:if("10000"!=(a=t.sent).data.resultCode){t.next=8;break}e.$message.success(a.data.resultMsg),t.next=9;break;case 8:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 9:case"end":return t.stop()}},t,e)}))()},getwechatlform:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.wechatConfigId=e.tabledata2[e.selectedRowKeys2[0]].wechatConfigId,t.next=3,e.$http.post(e.$api.customerwechatform,e.form);case 3:if("10000"!=(a=t.sent).data.resultCode){t.next=8;break}e.$message.success(a.data.resultMsg),t.next=9;break;case 8:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 9:case"end":return t.stop()}},t,e)}))()},getsmsform:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.smsConfigId=e.tabledata3[e.selectedRowKeys3[0]].smsConfigId,t.next=3,e.$http.post(e.$api.customersmsform,e.form);case 3:if("10000"!=(a=t.sent).data.resultCode){t.next=8;break}e.$message.success(a.data.resultMsg),t.next=9;break;case 8:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 9:case"end":return t.stop()}},t,e)}))()},setform:function(){this.form.customerId=this.listparam.customerId,"wechat"==this.listtype&&this.getwechatlform(),"email"==this.listtype&&this.getemailform(),"sms"==this.listtype&&this.getsmsform()},getemaillist:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$api.customeremaildetail,e.listparam);case 2:if("10000"!=(a=t.sent).data.resultCode){t.next=7;break}e.tabledata4=a.data.data,t.next=8;break;case 7:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 8:case"end":return t.stop()}},t,e)}))()},getsmslist:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$api.customersmsdetail,e.listparam);case 2:if("10000"!=(a=t.sent).data.resultCode){t.next=7;break}e.tabledata3=a.data.data,t.next=8;break;case 7:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 8:case"end":return t.stop()}},t,e)}))()},getwechatlist:function(e){var t=this;return i()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.tabletype=!1,e.next=3,t.$http.post(t.$api.customerwechatdetail,t.listparam);case 3:if("10000"!=(a=e.sent).data.resultCode){e.next=9;break}t.tabledata2=a.data.data,t.tabletype=!0,e.next=10;break;case 9:return e.abrupt("return",t.$message.error(a.data.resultMsg));case 10:case"end":return e.stop()}},e,t)}))()},changetab:function(e){this.listtype=e,"wechat"==e&&this.getwechatlist(),"sms"==e&&this.getsmslist(),"email"==e&&this.getemaillist()},onSelectChange:function(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys2=e},onSelectChange1:function(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys3=e},onSelectChange2:function(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys4=e},cancel:function(){this.reload()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex_f father"},[a("div",{staticClass:"isleft"},[a("div",{staticClass:"left_title"},[e._v("客户列表")]),e._v(" "),a("a-table",{attrs:{columns:e.tablecolumns,"data-source":e.tabledata,bordered:"",pagination:!1,customRow:e.rowClick},scopedSlots:e._u([{key:"statusCode",fn:function(t){return a("div",{staticClass:"flex_a"},[1==t?a("div",[e._v("启用")]):e._e(),e._v(" "),2==t?a("div",[e._v("备用")]):e._e(),e._v(" "),0==t?a("div",[e._v("关闭")]):e._e()])}}])})],1),e._v(" "),a("div",{staticClass:"isright"},[a("div",{staticClass:"flex_f isright_t"},[a("div",{class:"wechat"==e.listtype?"tab_blue":"tab_gray",on:{click:function(t){return e.changetab("wechat")}}},[e._v("微信帐号")]),e._v(" "),a("div",{class:"sms"==e.listtype?"tab_blue":"tab_gray",on:{click:function(t){return e.changetab("sms")}}},[e._v("短信帐号")]),e._v(" "),a("div",{class:"email"==e.listtype?"tab_blue":"tab_gray",on:{click:function(t){return e.changetab("email")}}},[e._v("邮箱帐号")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"wechat"==e.listtype,expression:"listtype=='wechat'"}],staticClass:"tree_box"},[e.tabletype?a("a-table",{attrs:{columns:e.tablecolumns2,"data-source":e.tabledata2,"row-selection":{selectedRowKeys:e.selectedRowKeys2,onChange:e.onSelectChange,type:"radio"},bordered:"",pagination:!1}}):e._e()],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"sms"==e.listtype,expression:"listtype=='sms'"}],staticClass:"tree_box"},[a("a-table",{attrs:{columns:e.tablecolumns3,"data-source":e.tabledata3,"row-selection":{selectedRowKeys:e.selectedRowKeys3,onChange:e.onSelectChange1,type:"radio"},bordered:"",pagination:!1}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"email"==e.listtype,expression:"listtype=='email'"}],staticClass:"tree_box"},[a("a-table",{attrs:{columns:e.tablecolumns4,"data-source":e.tabledata4,"row-selection":{selectedRowKeys:e.selectedRowKeys4,onChange:e.onSelectChange2,type:"radio"},bordered:"",pagination:!1}})],1),e._v(" "),a("div",{staticClass:"r_b"},[a("div",{staticClass:"r_b_title"},[e._v("授权描述:")]),e._v(" "),a("div",{staticClass:"rb_text"},[a("a-textarea",{attrs:{placeholder:"Basic usage",rows:5}})],1),e._v(" "),a("div",{staticClass:"flex_a rb_b"},[a("div",{staticClass:"flex_f"},[a("div",{staticClass:"cancel_btn rb_b_btn",on:{click:function(t){return e.cancel()}}},[e._v("取消")]),e._v(" "),a("div",{staticClass:"ok_btn",on:{click:function(t){return e.setform()}}},[e._v("授权")])])])])])])},staticRenderFns:[]};var c=a("VU/8")(o,l,!1,function(e){a("zWs2")},"data-v-2a86472b",null);t.default=c.exports},zWs2:function(e,t){}});