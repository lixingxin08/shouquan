webpackJsonp([38],{"7Opb":function(e,t){},Qe8S:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s=a("Xxa5"),n=a.n(s),r=a("exGp"),d=a.n(r),l=a("bOdI"),c=a.n(l),o=a("c/w/"),p=a("wxRv"),h={components:{isLeft:o.a,isDeleteDialog:p.a},data:function(){var e;return{ModalText:"您确定要删除吗？",visible:!1,showtree:!1,treedata:null,tabletype:!1,inp_data:"",isselectdata:{id:"",icon:"",isParent:"",levelType:"",name:"",open:"",pid:"",switcherIcon:"",title:""},replaceFields:{title:"name",key:"id"},tablecolumns:[{width:110,align:"center",title:"序号",dataIndex:"areaId",key:"areaId",ellipsis:!0},{width:100,align:"center",title:"区划名称",dataIndex:"areaName",key:"areaName",ellipsis:!0},{width:208,align:"center",title:"区划等级",dataIndex:"levelType",key:"levelType",ellipsis:!0},{width:208,align:"center",title:"上级区划",key:"parentName",dataIndex:"parentName",ellipsis:!0},{width:208,align:"center",title:"子节点数",key:"childTotal",dataIndex:"childTotal",ellipsis:!0},{width:208,align:"center",title:"授权次数",key:"authTotal",dataIndex:"authTotal",ellipsis:!0},{width:108,align:"center",title:"操作",ellipsis:!0,key:"1",dataIndex:"childTotal",scopedSlots:{customRender:"edit"}}],tabledata:"",defaultExpandedKeys:[],defaultSelectedKeys:[],data:"",pagination:{total:0,pageSize:10,showSizeChanger:!0,current:1,page:1,size:"default",pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共有 "+e+" 条数据"}},issearchdata:"",filterdata:[],areatreeprame:(e={areaId:"",keyword:""},c()(e,"keyword",""),c()(e,"latitude",0),c()(e,"longitude",0),c()(e,"operatorId",""),c()(e,"pageIndex",0),c()(e,"pageSize",10),c()(e,"parentId",""),c()(e,"remark",""),e),removeparam:{areaName:"",areaId:""},istotal:{type:1}}},created:function(){this.getareatree()},methods:(i={getareatree:function(){var e=this;return d()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.showtree=!1,t.next=3,e.$http.post(e.$api.areatree,e.areatreeprame);case 3:a=t.sent,console.log(a,11),"10000"==a.data.resultCode?e.data=a.data.data:e.$message.error(a.data.resultMsg),e.setdata(),console.log(e.treedata,66666),e.isselectdata.id=e.treedata[0].pid,e.getareapage();case 10:case"end":return t.stop()}},t,e)}))()},getareapage:function(){var e=this;return d()(n.a.mark(function t(){var a,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tabletype=!1,a={keyword:e.inp_data,latitude:0,list:[{}],longitude:0,parentId:e.isselectdata.id,pageIndex:e.pagination.page,pageSize:e.pagination.pageSize,remark:"",searchIndex:0},t.next=4,e.$http.post(e.$api.areapage,a);case 4:if("10000"!=(i=t.sent).data.resultCode){t.next=12;break}e.tabledata=i.data.data.list,1==e.istotal.type&&(e.pagination.total=i.data.data.length),e.istotal.type++,e.tabletype=!0,t.next=13;break;case 12:return t.abrupt("return",e.$message.error(i.data.resultMsg));case 13:case"end":return t.stop()}},t,e)}))()},getarearemove:function(){var e=this;return d()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$api.arearemove,e.removeparam);case 2:if("10000"!=(a=t.sent).data.resultCode){t.next=9;break}e.$message.success(a.data.resultMsg),e.getareapage(),e.visible=!1,t.next=10;break;case 9:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 10:case"end":return t.stop()}},t,e)}))()},confirm:function(){this.visible=!1},toadd:function(e,t){console.log(this.isselectdata,898989),"add"==e?(""==this.isselectdata.id&&(this.isselectdata.id=this.treedata[0].id,this.isselectdata.name=this.treedata[0].name,this.isselectdata.levelType=this.treedata[0].levelType),this.$router.push({path:"/addadministrativedivision",query:{type:e,id:this.isselectdata.id,name:this.isselectdata.name,levelType:this.isselectdata.levelType}})):this.$router.push({path:"/addadministrativedivision",query:{type:e,id:t.areaId}})},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.children});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.pid];i?(i.children||(i.children=[])).push(e):t.push(e)}),t},setdata:function(){for(var e=0;e<this.data.length;e++)1==this.data[e].open&&this.defaultExpandedKeys.push(this.data[e].id);this.treedata=this.toTree(this.data),console.log(this.treedata,222222222),this.defaultSelectedKeys=[],this.defaultSelectedKeys.push(this.treedata[0].id),console.log(this.defaultSelectedKeys,544444),this.showtree=!0},getsearchdata:function(e){this.issearchdata=e,this.getareatree(),""!=e&&(this.filterdata=[],this.setfilltertree(this.treedata,this.issearchdata))},setfilltertree:function(e,t){for(var a in e){-1!=(e[a].name+"").search(this.issearchdata)&&this.filterdata.push(e[a]),e[a].children&&this.setfilltertree(e[a].children)}this.treedata=this.toTree(this.filterdata)},getselectdata:function(e){this.isselectdata.id=e.id,this.isselectdata.name=e.name,this.isselectdata.pid=e.pid,this.isselectdata.levelType=e.levelType,this.istotal.type=1,this.inp_data="",this.getareapage()},tosearch:function(){this.isselectdata.id="",this.isselectdata.pid="",this.isselectdata.levelType="",this.istotal.type=1,this.pagination.page=1,this.pagination.pageSize=10,console.log(33333),this.getareapage()},clear:function(){this.isselectdata.name="",this.inp_data=""},showdialogadmin:function(e){console.log(e,221212),this.removeparam.areaName=e.areaName,this.removeparam.areaId=e.areaId,this.visible=!0},cancel:function(){this.visible=!1}},c()(i,"confirm",function(){this.getarearemove()}),c()(i,"handleCancel",function(e){console.log("Clicked cancel button"),this.visible=!1}),c()(i,"handleTableChange",function(e){this.pagination.page=e.current,this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,console.log(4444),this.getareapage()}),i)},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"administrativedivision"},[a("div",{staticClass:"flex_fs"},[a("div",{staticClass:"isleft"},[e.showtree?a("is-left",{attrs:{treedata:e.treedata,replaceFields:e.replaceFields,defaultExpandedKeys:e.defaultExpandedKeys,defaultSelectedKeys:e.defaultSelectedKeys},on:{selectdata:e.getselectdata,searchdata:e.getsearchdata}}):e._e()],1),e._v(" "),a("div",[a("div",{staticClass:"right"},[a("div",{staticClass:"r_top flex_f"},[a("div",{staticClass:"r_t_text",on:{click:function(t){return e.showdialogadmin()}}},[e._v("区划名称")]),e._v(" "),a("a-input",{staticClass:"r_t_inp",attrs:{placeholder:"请输入区划名称"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.tosearch()}},model:{value:e.inp_data,callback:function(t){e.inp_data=t},expression:"inp_data"}}),e._v(" "),a("div",{staticClass:"btn_blue btn",on:{click:function(t){return e.tosearch()}}},[e._v("查询")]),e._v(" "),a("div",{staticClass:"btn_gray",on:{click:function(t){return e.clear()}}},[e._v("清除")])],1),e._v(" "),a("div",{staticClass:"isline"}),e._v(" "),a("div",{staticClass:"btn_blue btn2",on:{click:function(t){return e.toadd("add")}}},[e._v("新增")]),e._v(" "),e.tabletype?a("div",{staticClass:"table"},[a("a-table",{attrs:{columns:e.tablecolumns,"data-source":e.tabledata,bordered:"",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"edit",fn:function(t,i){return a("div",{staticClass:"flex_a"},[a("div",{staticClass:"col_blue ispointer",on:{click:function(t){return e.toadd("edit",i)}}},[e._v("编辑")]),e._v(" "),0==t?a("div",{staticClass:"col_red ispointer",on:{click:function(t){return e.showdialogadmin(i)}}},[a("span",[e._v("删除")])]):e._e(),e._v(" "),0!==t?a("div",{staticClass:"col_gray ispointer"},[e._v("删除")]):e._e()])}}],null,!1,4094334139)})],1):e._e()])])]),e._v(" "),e.visible?a("is-delete-dialogadmin",{on:{confirm:e.confirm,cancle:e.cancel}}):e._e()],1)},staticRenderFns:[]};var f=a("VU/8")(h,u,!1,function(e){a("7Opb")},"data-v-68841e4a",null);t.default=f.exports}});