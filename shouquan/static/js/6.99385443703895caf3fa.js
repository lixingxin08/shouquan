webpackJsonp([6],{"/PP4":function(e,t){},"9rDm":function(e,t,a){"use strict";var s={data:function(){return{showLine:!0,showIcon:!0,olddata:"",oldcheck:""}},props:{treedata:Array,checkable:{type:Boolean,default:!0},replaceFields:Object,defaultExpandedKeys:Array,checkedKeys:Array},created:function(){},methods:{onSelect:function(e,t){if(this.checkedKeys.includes(e[0]))for(var a=0;a<this.checkedKeys.length;a++)this.checkedKeys[a]==e[0]&&(console.log(a,0x3f28cb71571c7),this.checkedKeys.splice(a,1),this.oldcheck=e[0]);else this.checkedKeys.push(e[0]);0==e.length&&this.checkedKeys.push(this.oldcheck),0!=t.selected&&(this.olddata=t.selectedNodes[0].data.props,this.$emit("selectdata",t.selectedNodes[0].data.props||""))},onSearch:function(e){console.log(e,88292),this.$emit("searchdata",e)},onCheck:function(e,t){console.log("onCheck",e,t),this.checkedKeys=e}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"search"},[t("div",{staticClass:"istree"},[t("a-tree",{attrs:{"show-line":this.showLine,checkable:this.checkable,"tree-data":this.treedata,replaceFields:this.replaceFields,"checked-keys":this.checkedKeys,selectable:!1,"default-expanded-keys":this.defaultExpandedKeys},on:{check:this.onCheck}},[t("a-icon",{attrs:{slot:"icon",type:"carry-out"},slot:"icon"})],1)],1)])},staticRenderFns:[]};var c=a("VU/8")(s,r,!1,function(e){a("NKtJ")},"data-v-d4c847e4",null);t.a=c.exports},NKtJ:function(e,t){},k2uF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),c=a("exGp"),i=a.n(c),n={inject:["reload"],components:{isLeft:a("9rDm").a},data:function(){var e=this;return{rowClick:function(t){return{on:{click:function(){console.log(t,"record"),e.treeprame.customerId=t.customerId,e.gettree()}}}},tablecolumns:[{width:58,align:"center",title:"序号",dataIndex:"customerId",key:"customerId",ellipsis:!0},{width:141,align:"center",title:"客户简称",dataIndex:"shortName",key:"shortName",ellipsis:!0},{width:141,align:"center",title:"客户状态",dataIndex:"statusCode",key:"statusCode",ellipsis:!0,scopedSlots:{customRender:"statusCode"}}],tabledata:[],treedata:"",checkedKeys:[],replaceFields:{title:"name",key:"id"},defaultExpandedKeys:[],data:"",showtree:!1,treeprame:{customerId:""},listparam:{operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId,customerId:""},form:{customerId:"",alarmIdList:"",remark:"",operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId}}},created:function(){this.getlist()},methods:{getlist:function(){var e=this;return i()(r.a.mark(function t(){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tabletype=!1,t.next=3,e.$http.post(e.$api.customeraccountmylist,e.listparam);case 3:if("10000"!=(a=t.sent).data.resultCode){t.next=11;break}for(s=0;s<a.data.data.length;s++)1==a.data.data[s].statusCode&&e.tabledata.push(a.data.data[s]);e.tabletype=!0,e.treeprame.customerId=e.tabledata[0].customerId,e.gettree(),t.next=12;break;case 11:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 12:case"end":return t.stop()}},t,e)}))()},getform:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e.checkedKeys,55555555),e.form.customerId=e.treeprame.customerId,e.form.alarmIdList=e.checkedKeys,0!=e.form.alarmIdList.length){t.next=5;break}return t.abrupt("return",e.$message.error("请选择授权区域"));case 5:if(""!=e.form.customerId){t.next=7;break}return t.abrupt("return",e.$message.error("请选择授权客户"));case 7:return t.next=9,e.$http.post(e.$api.customeralarmform,e.form);case 9:if("10000"!=(a=t.sent).data.resultCode){t.next=14;break}e.$message.error("授权成功"),t.next=15;break;case 14:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 15:case"end":return t.stop()}},t,e)}))()},gettree:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.showtree=!1,t.next=3,e.$http.post(e.$api.customeralarmtree,e.treeprame);case 3:if(a=t.sent,console.log(a,11),"10000"!=a.data.resultCode){t.next=9;break}e.data=a.data.data,t.next=10;break;case 9:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 10:e.setdata(),e.showtree=!0;case 12:case"end":return t.stop()}},t,e)}))()},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.children});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var s=a[e.pid];s?(s.children||(s.children=[])).push(e):t.push(e)}),t},setdata:function(){for(var e=0;e<this.data.length;e++)1==this.data[e].open&&this.defaultExpandedKeys.push(this.data[e].id),1==this.data[e].checked&&this.checkedKeys.push(this.data[e].id);this.treedata=this.toTree(this.data)},getsearchdata:function(e){this.issearchdata=e,this.getareatree(),""!=e&&(this.filterdata=[],this.setfilltertree(this.treedata,this.issearchdata))},setfilltertree:function(e,t){for(var a in e){-1!=(e[a].name+"").search(this.issearchdata)&&this.filterdata.push(e[a]),e[a].children&&this.setfilltertree(e[a].children)}this.treedata=this.toTree(this.filterdata)},getselectdata:function(e){this.isselectdata=e,this.isselectdata.id=e.id,this.isselectdata.name=e.name,this.isselectdata.pid=e.pid,this.istotal.type=1},getcheckedKeys:function(e){console.log(e,44444),this.form.alarmIdList=e},cancel:function(){this.reload()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex_f father"},[a("div",{staticClass:"isleft"},[a("div",{staticClass:"left_title"},[e._v("客户列表")]),e._v(" "),a("a-table",{attrs:{columns:e.tablecolumns,"data-source":e.tabledata,bordered:"",pagination:!1,customRow:e.rowClick},scopedSlots:e._u([{key:"statusCode",fn:function(t){return a("div",{staticClass:"flex_a"},[1==t?a("div",[e._v("启用")]):e._e(),e._v(" "),2==t?a("div",[e._v("备用")]):e._e(),e._v(" "),0==t?a("div",[e._v("关闭")]):e._e()])}}])})],1),e._v(" "),a("div",{staticClass:"isright"},[a("div",{staticClass:"left_title"},[e._v("警报列表")]),e._v(" "),a("div",{staticClass:"tree_box_aler"},[e.showtree?a("is-left",{attrs:{treedata:e.treedata,replaceFields:e.replaceFields,defaultExpandedKeys:e.defaultExpandedKeys,checkedKeys:e.checkedKeys},on:{checkedKeys:e.getcheckedKeys}}):e._e()],1),e._v(" "),a("div",{staticClass:"r_b"},[a("div",{staticClass:"r_b_title"},[e._v("授权描述:")]),e._v(" "),a("div",{staticClass:"rb_text"},[a("a-textarea",{attrs:{placeholder:"Basic usage",rows:5}})],1),e._v(" "),a("div",{staticClass:"flex_a rb_b"},[a("div",{staticClass:"flex_f"},[a("div",{staticClass:"cancel_btn rb_b_btn",on:{click:function(t){return e.cancel()}}},[e._v("取消")]),e._v(" "),a("div",{staticClass:"ok_btn",on:{click:function(t){return e.getform()}}},[e._v("授权")])])])])])])},staticRenderFns:[]};var o=a("VU/8")(n,d,!1,function(e){a("/PP4")},"data-v-4f930c2e",null);t.default=o.exports}});