webpackJsonp([33],{NJJS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Gu7T"),i=a.n(r),s=a("Xxa5"),n=a.n(s),o=a("exGp"),l=a.n(o),c=(a("pytN"),[{title:"序号",width:"3%",align:"center",className:"topic-info",scopedSlots:{customRender:"index"}},{title:"属性名称",dataIndex:"propertyName",align:"center",width:"15%",className:"topic-info"},{title:"属性代码",dataIndex:"propertyCode",align:"center",width:"15%",className:"topic-info",scopedSlots:{customRender:"propertyCode"}},{title:"属性描述",dataIndex:"propertyDesc",align:"center",width:"40%",className:"topic-info",scopedSlots:{customRender:"propertyDesc"}},{title:"属性值",dataIndex:"propertyValue",align:"center",width:"25%",scopedSlots:{customRender:"propertyValue"}}]),d={data:function(){return{dictionaryColumns:c,modelDetail:{},groups:[]}},created:function(){this.id=this.$route.query.id,this.getModelInfo()},methods:{submit:function(){var t=this;return l()(n.a.mark(function e(){var a,r,i,s,o,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],r=0;r<t.groups.length;r++)if(t.groups[r].childrenList)for(i=0;i<t.groups[r].childrenList.length;i++)s=t.groups[r].childrenList[i],o={propertyId:s.propertyId,modelId:t.id,deviceTypeId:s.deviceTypeId,propertyValue:s.propertyValue?s.propertyValue:"",operatorId:"5172dadd6d7c404e8ac657f32f81d969"},a.push(o);return e.next=4,t.$http.post(t.$api.propertyvalueform,a);case 4:1e3==(l=e.sent).data.resultCode?t.$message.success(l.data.resultMsg):t.$message.error(l.data.resultMsg),t.reset();case 7:case"end":return e.stop()}},e,t)}))()},reset:function(){this.getProperty(this.modelDetail.deviceTypeId)},getModelInfo:function(){var t=this;return l()(n.a.mark(function e(){var a,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={modelId:t.id},e.next=3,t.$http.post(t.$api.devicemodeldetail,a);case 3:1e4==(r=e.sent).data.resultCode&&(t.modelDetail=r.data.data,t.getProperty(t.modelDetail.deviceTypeId));case 5:case"end":return e.stop()}},e,t)}))()},getProperty:function(t){var e=this;return l()(n.a.mark(function t(){var a,r,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={modelId:e.id},t.next=3,e.$http.post(e.$api.propertyvaluedetail,a);case 3:1e4==(r=t.sent).data.resultCode&&(i=[],r.data.data.forEach(function(t){"100000000000000000000000000000000000000000000000000000000000"==t.parentId&&(t.childrenList=[],r.data.data.forEach(function(e){e.parentId==t.propertyId&&t.childrenList.push(e)}),i.push(t))}),e.groups=i);case 5:case"end":return t.stop()}},t,e)}))()},handleChange:function(t,e,a){var r=[].concat(i()(this.groups)),s=r[a].childrenList[e];s&&(s.propertyValue=t,this.groups=r)}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content2"},[a("div",{staticClass:"flexrow flexac",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"title_tx"},[t._v("业务类别:")]),t._v(" "),a("div",{staticClass:"flexrow flexac flexsb title_item"},[t._v("\n      "+t._s(t.modelDetail.serviceTypeName)+"\n      "),a("a-icon",{attrs:{type:"down"}})],1),t._v(" "),a("div",{staticClass:"title_tx"},[t._v("设备类型:")]),t._v(" "),a("div",{staticClass:"flexrow flexac flexsb title_item"},[t._v("\n      "+t._s(t.modelDetail.deviceTypeName)+"\n      "),a("a-icon",{attrs:{type:"down"}})],1),t._v(" "),a("div",{staticClass:"title_tx"},[t._v("设备品牌:")]),t._v(" "),a("div",{staticClass:"flexrow flexac flexsb title_item"},[t._v("\n      "+t._s(t.modelDetail.brandName)+"\n      "),a("a-icon",{attrs:{type:"down"}})],1),t._v(" "),a("div",{staticClass:"title_tx"},[t._v("型号名称:")]),t._v(" "),a("div",{staticClass:"flexrow flexac flexsb title_item"},[t._v("\n      "+t._s(t.modelDetail.modelName)+"\n      "),a("a-icon",{attrs:{type:"down"}})],1)]),t._v(" "),t._l(t.groups,function(e,r){return a("div",{key:r,staticClass:"flexcolumn",staticStyle:{padding:"10px",border:"1px solid #E5E5E5","margin-top":"20px"}},[a("div",{staticClass:"flexrow flexac"},[t._v("\n      属性分组:\n      "),a("a",{staticClass:"title_item",staticStyle:{"margin-left":"20px",width:"667px"}},[t._v(t._s(e.propertyName))])]),t._v(" "),a("a-table",{staticStyle:{"margin-top":"20px"},attrs:{columns:t.dictionaryColumns,"data-source":e.childrenList,pagination:!1,bordered:!0,size:"small"},scopedSlots:t._u([{key:"index",fn:function(e,r,i){return[a("div",[t._v(t._s(i+1))])]}},{key:"propertyValue",fn:function(e,i,s){return[a("a-input",{staticStyle:{margin:"-5px 0",border:"0px"},on:{change:function(e){return t.handleChange(e.target.value,s,r)}},model:{value:e,callback:function(t){e=t},expression:"text"}})]}}],null,!0)})],1)}),t._v(" "),a("div",{staticClass:"flexrow flexjc",staticStyle:{"margin-top":"40px","margin-bottom":"100px"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("保存")]),t._v(" "),a("a-button",{staticStyle:{"margin-left":"20px"},on:{click:t.reset}},[t._v("重置")])],1)],2)},staticRenderFns:[]};var u=a("VU/8")(d,p,!1,function(t){a("sf3B")},null,null);e.default=u.exports},sf3B:function(t,e){}});