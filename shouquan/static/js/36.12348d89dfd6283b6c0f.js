webpackJsonp([36],{ojb2:function(e,t){},wEWt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=a("bOdI"),n=a.n(i),r=a("Xxa5"),d=a.n(r),o=a("exGp"),l=a.n(o),c=a("c/w/"),p=a("wxRv"),u={components:{isLeft:c.a,isDeleteDialog:p.a},data:function(){return{ModalText:"您确定要删除吗？",visible:!1,showtree:!1,treedata:null,tabletype:!1,inp_data:"",inp_data2:"",isselectdata:{id:"",name:""},replaceFields:{title:"name",key:"id"},tablecolumns:[{width:110,align:"center",title:"序号",dataIndex:"departmentId",key:"departmentId",ellipsis:!0,scopedSlots:{customRender:"index"}},{width:100,align:"center",title:"人员姓名",dataIndex:"realName",key:"realName",ellipsis:!0},{width:208,align:"center",title:"人员性别",dataIndex:"gender",key:"gender",ellipsis:!0,scopedSlots:{customRender:"gender"}},{width:208,align:"center",title:"手机号码",key:"mobilePhone",dataIndex:"mobilePhone",ellipsis:!0},{width:208,align:"center",title:"员工状态",key:"statusCode",dataIndex:"statusCode",ellipsis:!0,scopedSlots:{customRender:"statusCode"}},{width:108,align:"center",title:"所属部门",key:"departmentName",dataIndex:"departmentName",ellipsis:!0},{width:108,align:"center",title:"是否分配账号",ellipsis:!0,key:"existsFlag",dataIndex:"existsFlag",scopedSlots:{customRender:"existsFlag"}},{width:108,align:"center",title:"操作",ellipsis:!0,scopedSlots:{customRender:"edit"}}],tabledata:"",defaultExpandedKeys:[],pageparam:{keyword:"",statusCode:""},statusCode:[{id:1,val:"正常"},{id:0,val:"休假"},{id:2,val:"离岗"}],data:"",pagination:{total:0,pageSize:10,showSizeChanger:!0,current:1,page:1,pageSizeOptions:["10","20","50","100"],showTotal:function(e){return"共有 "+e+" 条数据"}},issearchdata:"",filterdata:[],treeprame:{departmentId:"",operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId,customerId:""},removeparam:{personId:"",operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId},istotal:{type:1}}},created:function(){this.getareatree()},methods:(s={getareatree:function(){var e=this;return l()(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.showtree=!1,t.next=3,e.$http.post(e.$api.departmenttree,e.treeprame);case 3:a=t.sent,console.log(a,11),"10000"==a.data.resultCode?e.data=a.data.data:e.$message.error(a.data.resultMsg),e.setdata(),e.showtree=!0,e.getpersonpage();case 9:case"end":return t.stop()}},t,e)}))()},getpersonpage:function(){var e=this;return l()(d.a.mark(function t(){var a,s;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tabletype=!1,a={departmentId:e.isselectdata.id,keyword:e.pageparam.keyword,statusCode:e.pageparam.statusCode,pageIndex:e.pagination.page,pageSize:e.pagination.pageSize},t.next=4,e.$http.post(e.$api.personpage,a);case 4:"10000"==(s=t.sent).data.resultCode?(e.tabledata=s.data.data.list,1==e.istotal.type&&(e.pagination.total=s.data.data.length),e.istotal.type++,e.tabletype=!0):(e.tabletype=!1,e.$message.success(s.data.resultMsg));case 6:case"end":return t.stop()}},t,e)}))()},getremove:function(){var e=this;return l()(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$api.persondeleteByPersonId,e.removeparam);case 2:"10000"==(a=t.sent).data.resultCode?(e.$message.success(a.data.resultMsg),e.getpersonpage(),e.visible=!1):e.$message.error(a.data.resultMsg);case 4:case"end":return t.stop()}},t,e)}))()},confirm:function(){this.visible=!1},toadd:function(e,t){"add"==e?(""==this.isselectdata.id&&(this.isselectdata.id=this.treedata[0].id,this.isselectdata.name=this.treedata[0].name),this.$router.push({path:"/addpersonnelManagement",query:{type:e,id:this.isselectdata.id,name:this.isselectdata.name}})):this.$router.push({path:"/addpersonnelManagement",query:{type:e,id:t.personId}})},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.children});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var s=a[e.pid];s?(s.children||(s.children=[])).push(e):t.push(e)}),t},setdata:function(){for(var e=0;e<this.data.length;e++)1==this.data[e].open&&this.defaultExpandedKeys.push(this.data[e].id);this.treedata=this.toTree(this.data)},getsearchdata:function(e){this.issearchdata=e,this.getareatree(),""!=e&&(this.filterdata=[],this.setfilltertree(this.treedata,this.issearchdata))},setfilltertree:function(e,t){for(var a in e){-1!=(e[a].name+"").search(this.issearchdata)&&this.filterdata.push(e[a]),e[a].children&&this.setfilltertree(e[a].children)}this.treedata=this.toTree(this.filterdata)},getselectdata:function(e){console.log(this.isselectdata,98899),this.isselectdata.id=e.id,this.isselectdata.name=e.name,this.istotal.type=1,this.getpersonpage()},tosearch:function(){this.istotal.type=1,this.pagination.page=1,this.pagination.pageSize=10,this.isselectdata.id="",this.getpersonpage()},clear:function(){this.pageparam.keyword="",this.pageparam.statusCode=""},showdialogperson:function(e){console.log(e,221212),this.removeparam.personId=e.personId,this.visible=!0},cancel:function(){this.visible=!1}},n()(s,"confirm",function(){this.getremove()}),n()(s,"handleCancel",function(e){console.log("Clicked cancel button"),this.visible=!1}),n()(s,"handleTableChange",function(e){this.pagination.page=e.current,this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.getpersonpage()}),n()(s,"handleChange",function(e){console.log(e,5555),this.pageparam.statusCode=e}),s)},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"administrativedivision"},[a("div",{staticClass:"flex_fs"},[a("div",{staticClass:"isleft"},[e.showtree?a("is-left",{attrs:{treedata:e.treedata,replaceFields:e.replaceFields,defaultExpandedKeys:e.defaultExpandedKeys},on:{selectdata:e.getselectdata,searchdata:e.getsearchdata}}):e._e()],1),e._v(" "),a("div",[a("div",{staticClass:"right"},[a("div",{staticClass:"r_top flex_f"},[a("div",{staticClass:"r_t_text"},[e._v("人员姓名/手机号码:")]),e._v(" "),a("a-input",{staticClass:"r_t_inp",attrs:{placeholder:"请输入人员姓名/手机号码"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.tosearch()}},model:{value:e.pageparam.keyword,callback:function(t){e.$set(e.pageparam,"keyword",t)},expression:"pageparam.keyword"}}),e._v(" "),a("div",{staticClass:"r_t_text"},[e._v("人员状态:")]),e._v(" "),a("a-select",{staticStyle:{width:"200px","margin-right":"20px",height:"36px","border-radius":"8px"},attrs:{"show-search":"",placeholder:"全部","option-filter-prop":"children"},on:{change:e.handleChange},model:{value:e.pageparam.statusCode,callback:function(t){e.$set(e.pageparam,"statusCode",t)},expression:"pageparam.statusCode"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),e._l(e.statusCode,function(t,s){return a("a-select-option",{key:s,attrs:{value:t.id}},[e._v(e._s(t.val))])})],2),e._v(" "),a("div",{staticClass:"btn_blue btn",on:{click:function(t){return e.tosearch()}}},[e._v("查询")]),e._v(" "),a("div",{staticClass:"btn_gray",on:{click:function(t){return e.clear()}}},[e._v("清除")])],1),e._v(" "),a("div",{staticClass:"isline"}),e._v(" "),a("div",{staticClass:"btn_blue btn2",on:{click:function(t){return e.toadd("add")}}},[e._v("新增")]),e._v(" "),e.tabletype?a("div",{staticClass:"table"},[a("a-table",{attrs:{columns:e.tablecolumns,"data-source":e.tabledata,bordered:"",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"index",fn:function(t,a,s){return[e._v(e._s(s+1+10*(e.pagination.current-1)))]}},{key:"gender",fn:function(t){return a("div",{staticClass:"flex_a"},[a("div",1==t?[e._v("男")]:[e._v("女")])])}},{key:"statusCode",fn:function(t){return a("div",{staticClass:"flex_a"},[1==t?a("div",[e._v("正常")]):e._e(),e._v(" "),0==t?a("div",[e._v("休假")]):e._e(),e._v(" "),2==t?a("div",[e._v("离岗")]):e._e()])}},{key:"existsFlag",fn:function(t){return a("div",{staticClass:"flex_a"},[1==t?a("div",[e._v("是")]):e._e(),e._v(" "),0==t?a("div",[e._v("否")]):e._e()])}},{key:"edit",fn:function(t,s){return a("div",{staticClass:"flex_a"},[a("div",{staticClass:"col_blue ispointer",on:{click:function(t){return e.toadd("edit",s)}}},[e._v("编辑")]),e._v(" "),0==t.existsFlag?a("div",{staticClass:"col_red ispointer",on:{click:function(a){return e.showdialogperson(t)}}},[a("span",[e._v("删除")])]):e._e(),e._v(" "),0!==t.existsFlag?a("div",{staticClass:"col_gray ispointer"},[e._v("删除")]):e._e()])}}],null,!1,3771719301)})],1):e._e(),e._v(" "),e.tabletype?e._e():a("div",{staticClass:"table"},[e._v("无")])])])]),e._v(" "),e.visible?a("is-delete-dialogperson",{on:{confirm:e.confirm,cancle:e.cancel}}):e._e()],1)},staticRenderFns:[]};var g=a("VU/8")(u,h,!1,function(e){a("ojb2")},"data-v-6cae2bab",null);t.default=g.exports}});