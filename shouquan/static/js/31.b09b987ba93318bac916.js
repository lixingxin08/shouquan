webpackJsonp([31],{Hg9A:function(e,t){},dHSE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),o=a("exGp"),d=a.n(o),i={inject:["reload"],components:{isLeft:a("c/w/").a},data:function(){var e=this;return{isdefaultChecked:"路灯控制器NB版",rowSelection:{getCheckboxProps:function(t){return{props:{defaultChecked:t.modelName===e.isdefaultChecked,name:t.modelName}}},onChange:function(e,t){console.log("selectedRowKeys: "+e,"selectedRows: ",t)},onSelect:function(t,a,r){console.log(t,a,r,2222),e.form.modelIdList=[],r.length>0&&r.forEach(function(t){e.form.modelIdList.push(t.modelId)})},onSelectAll:function(t,a,r){console.log(t,a,r,1111),e.form.modelIdList=[],1==t&&a.forEach(function(t){e.form.modelIdList.push(t.modelId)})}},tablecolumns:[{width:58,align:"center",title:"序号",dataIndex:"customerId",key:"customerId",ellipsis:!0},{width:141,align:"center",title:"客户简称",dataIndex:"shortName",key:"shortName",ellipsis:!0},{width:141,align:"center",title:"客户状态",dataIndex:"statusCode",key:"statusCode",ellipsis:!0,scopedSlots:{customRender:"statusCode"}}],tabledata:[],tabletype:!1,tabletype2:!1,tablecolumns2:[{width:58,align:"center",title:"型号序号",dataIndex:"modelId",key:"modelId",ellipsis:!0},{width:141,align:"center",title:"型号名称",dataIndex:"modelName",key:"modelName",ellipsis:!0},{width:141,align:"center",title:"型号品牌",dataIndex:"brandName",key:"brandName",ellipsis:!0},{width:141,align:"center",title:"设备类型",dataIndex:"deviceTypeName",key:"deviceTypeName",ellipsis:!0}],tabledata2:[],treedata:"",replaceFields:{title:"name",key:"id"},defaultExpandedKeys:[],data:"",showtree:!1,treeprame:{customerId:"",operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId},listparam:{operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId,customerId:""},modellistparam:{operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId,customerId:""},treemodelparam:{id:"",levelType:""},treemodeldata:"",customerId:"",form:{modelIdList:[],accountId:"",remark:"",operatorId:JSON.parse(localStorage.getItem("usermsg")).accountId},rowClick:function(t){return{on:{click:function(){e.modellistparam.customerId=t.customerId,e.getmodellist(),console.log(t,"record",e.customerId)}}}}}},created:function(){this.getlist(),this.getareatree()},methods:{getlist:function(){var e=this;return d()(s.a.mark(function t(){var a,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tabletype=!1,t.next=3,e.$http.post(e.$api.customeraccountmylist,e.listparam);case 3:if("10000"!=(a=t.sent).data.resultCode){t.next=12;break}for(r=0;r<a.data.data.length;r++)1==a.data.data[r].statusCode&&e.tabledata.push(a.data.data[r]);e.modellistparam.customerId=e.tabledata[0].customerId,e.form.customerId=e.tabledata[0].customerId,e.getmodellist(),e.tabletype=!0,t.next=13;break;case 12:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 13:case"end":return t.stop()}},t,e)}))()},getmodellist:function(){var e=this;return d()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tabletype2=!1,t.next=3,e.$http.post(e.$api.customermodellist,e.modellistparam);case 3:if("10000"!=(a=t.sent).data.resultCode){t.next=9;break}e.tabledata2=a.data.data,e.tabletype2=!0,t.next=11;break;case 9:return e.tabledata2="",t.abrupt("return",e.$message.error(a.data.resultMsg));case 11:case"end":return t.stop()}},t,e)}))()},gettreemodellist:function(){var e=this;return d()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tabletype2=!1,t.next=3,e.$http.post(e.$api.devicemodelrelist,e.treemodelparam);case 3:if("10000"!=(a=t.sent).data.resultCode){t.next=10;break}console.log(a.data.data,7778888),e.treemodeldata=a.data.data,e.tabletype2=!0,t.next=11;break;case 10:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 11:case"end":return t.stop()}},t,e)}))()},getform:function(){var e=this;return d()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tabletype2=!1,console.log(e.form,111111111111),e.form.customerId=e.modellistparam.customerId,t.next=5,e.$http.post(e.$api.customermodelform,e.form);case 5:if("10000"!=(a=t.sent).data.resultCode){t.next=10;break}return t.abrupt("return",e.$message.success(a.data.resultMsg));case 10:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 11:case"end":return t.stop()}},t,e)}))()},getareatree:function(){var e=this;return d()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.showtree=!1,t.next=3,e.$http.post(e.$api.devicetypetree,e.treeprame);case 3:if(a=t.sent,console.log(a,11),"10000"!=a.data.resultCode){t.next=9;break}e.data=a.data.data,t.next=10;break;case 9:return t.abrupt("return",e.$message.error(a.data.resultMsg));case 10:e.setdata(),e.showtree=!0;case 12:case"end":return t.stop()}},t,e)}))()},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.children});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var r=a[e.pid];r?(r.children||(r.children=[])).push(e):t.push(e)}),t},setdata:function(){for(var e=0;e<this.data.length;e++)1==this.data[e].open&&this.defaultExpandedKeys.push(this.data[e].id);this.treedata=this.toTree(this.data)},getsearchdata:function(e){this.issearchdata=e,this.getareatree(),""!=e&&(this.filterdata=[],this.setfilltertree(this.treedata,this.issearchdata))},setfilltertree:function(e,t){for(var a in e){-1!=(e[a].name+"").search(this.issearchdata)&&this.filterdata.push(e[a]),e[a].children&&this.setfilltertree(e[a].children)}this.treedata=this.toTree(this.filterdata)},getselectdata:function(e){console.log(e,544444),this.treemodelparam.id=e.id,this.treemodelparam.levelType=e.levelType,this.gettreemodellist()},getcheckedKeys:function(e){console.log(e,44444)},cancel:function(){this.reload()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex_f father"},[a("div",{staticClass:"isleft"},[a("div",{staticClass:"left_title"},[e._v("客户列表")]),e._v(" "),a("a-table",{attrs:{columns:e.tablecolumns,"data-source":e.tabledata,bordered:"",pagination:!1,customRow:e.rowClick},scopedSlots:e._u([{key:"statusCode",fn:function(t){return a("div",{staticClass:"flex_a"},[1==t?a("div",[e._v("启用")]):e._e(),e._v(" "),2==t?a("div",[e._v("备用")]):e._e(),e._v(" "),0==t?a("div",[e._v("关闭")]):e._e()])}}])})],1),e._v(" "),a("div",{staticClass:"isright"},[a("div",{staticClass:"flex_f"},[a("div",{staticClass:"isright_l"},[a("div",{staticClass:"left_title_model"},[e._v("设备类型")]),e._v(" "),a("div",{staticClass:"tree_box tree_box1"},[e.showtree?a("is-left",{attrs:{treedata:e.treedata,replaceFields:e.replaceFields,defaultExpandedKeys:e.defaultExpandedKeys},on:{selectdata:e.getselectdata,checkedKeys:e.getcheckedKeys}}):e._e()],1)]),e._v(" "),a("div",{staticClass:"isright_r"},[a("div",{staticClass:"left_title_model"},[e._v("型号列表")]),e._v(" "),a("div",{staticClass:"tree_box"},[a("a-table",{attrs:{columns:e.tablecolumns2,"data-source":e.tabledata2,"row-selection":e.rowSelection,bordered:"",pagination:!1}})],1)])]),e._v(" "),a("div",{staticClass:"r_b"},[a("div",{staticClass:"r_b_title"},[e._v("授权描述:")]),e._v(" "),a("div",{staticClass:"rb_text"},[a("a-textarea",{attrs:{placeholder:"Basic usage",rows:5}})],1),e._v(" "),a("div",{staticClass:"flex_a rb_b"},[a("div",{staticClass:"flex_f"},[a("div",{staticClass:"cancel_btn rb_b_btn",on:{click:function(t){return e.cancel()}}},[e._v("取消")]),e._v(" "),a("div",{staticClass:"ok_btn",on:{click:function(t){return e.getform()}}},[e._v("授权")])])])])])])},staticRenderFns:[]};var n=a("VU/8")(i,l,!1,function(e){a("Hg9A")},"data-v-8a3cad58",null);t.default=n.exports}});