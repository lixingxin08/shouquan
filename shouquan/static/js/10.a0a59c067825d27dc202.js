webpackJsonp([10],{"49Lz":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),i=n.n(a),o=n("exGp"),s=n.n(o),r=n("NYoz"),c=n.n(r),l={data:function(){return{keyword:"",eventSelect:"",eventList:[{comboBoxId:"",comboBoxName:"全部"}],dictionaryColumns:c.a.data.dictionaryColumns,deviceList:[],pagination:{total:0,current:1,size:"default",pageSize:20,showSizeChanger:!0,pageSizeOptions:["10","20","30","40"],showQuickJumper:!0}}},created:function(){this.getCombobox(),this.getEvent()},methods:{handleTableChange:function(e){this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.getEvent()},eventSelectChange:function(e){this.eventSelect=e},getEvent:function(){var e=this;return s()(i.a.mark(function t(){var n,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={pageSize:e.pagination.pageSize,pageIndex:e.pagination.current,keyword:e.keyword,eventType:e.eventSelect},t.next=3,e.$http.post(e.$api.deviceeventpage,n);case 3:1e4==(a=t.sent).data.resultCode?(e.deviceList=a.data.data.list,1==e.pagination.current&&(e.pagination.total=a.data.data.length)):(e.deviceList=[],e.$message.error(a.data.resultMsg));case 5:case"end":return t.stop()}},t,e)}))()},confirmDelete:function(e){var t=this;return s()(i.a.mark(function n(){var a,o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a={eventId:e.eventId},n.next=3,t.$http.post(t.$api.deviceeventremove,a);case 3:1e4==(o=n.sent).data.resultCode?(t.$message.success(o.data.resultMsg),t.getEvent()):t.$message.error(o.data.resultMsg);case 5:case"end":return n.stop()}},n,t)}))()},cleanKeyWord:function(){this.keyword="",this.eventSelect="",this.getEvent()},getCombobox:function(){var e=this;return s()(i.a.mark(function t(){var n,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={classCode:"device_event_type"},t.next=3,e.$http.post(e.$api.dictionarycombobox,n);case 3:1e4==(a=t.sent).data.resultCode&&(e.eventList=e.eventList.concat(a.data.data));case 5:case"end":return t.stop()}},t,e)}))()},editDevice:function(e){this.$router.push({path:"/adddeviceevent",query:{id:e.eventId}})}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content2"},[n("div",{staticClass:"flexrow flexac"},[n("div",{staticClass:"title_tx"},[e._v("事件名称/代码:")]),e._v(" "),n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称/代码"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),n("div",{staticClass:"title_tx",staticStyle:{"margin-left":"20px"}},[e._v("事件类别:")]),e._v(" "),n("a-select",{staticStyle:{width:"200px"},attrs:{value:e.eventSelect?e.eventSelect:"全部"},on:{change:e.eventSelectChange}},e._l(e.eventList,function(t,a){return n("a-select-option",{key:a,attrs:{value:t.comboBoxId}},[e._v("\n        "+e._s(t.comboBoxName)+"\n      ")])}),1),e._v(" "),n("a-button",{staticClass:"title_btn",attrs:{type:"primary"},on:{click:e.getEvent}},[e._v("查询")]),e._v(" "),n("a-button",{on:{click:e.cleanKeyWord}},[e._v("清除")])],1),e._v(" "),n("div",{staticClass:"view-title-line"}),e._v(" "),n("a-button",{staticClass:"addbtn",attrs:{type:"primary"},on:{click:function(t){return e.editDevice({})}}},[n("a-icon",{staticStyle:{"margin-right":"5px"},attrs:{"two-tone-color":"#ffffff",type:"plus"}}),e._v(" 新增\n  ")],1),e._v(" "),n("a-table",{attrs:{scroll:{y:700},columns:e.dictionaryColumns,"data-source":e.deviceList,bordered:"",size:"small",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"index",fn:function(t,n,a){return[e._v("\n      "+e._s(a+1+10*(e.pagination.current-1))+"\n    ")]}},{key:"operation",fn:function(t,a){return[n("div",{staticClass:"flexrow flexac flexjc"},[n("a",{staticStyle:{"font-size":"12px"},attrs:{href:"#"},on:{click:function(t){return e.editDevice(a)}}},[e._v("编辑")]),e._v(" "),n("div",{staticClass:"item-line"}),e._v(" "),a.alarmTotal>0?n("a-popconfirm",{attrs:{title:"确定删除？","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.confirmDelete(a)}}},[n("a",{staticStyle:{color:"#FF0000","font-size":"12px"},attrs:{href:"#"}},[e._v("删除")])]):n("div",{staticStyle:{color:"#999999"}},[e._v("\n          删除\n        ")])],1)]}}])})],1)},staticRenderFns:[]};var u=n("VU/8")(l,d,!1,function(e){n("gWaP")},null,null);t.default=u.exports},NYoz:function(e,t){e.exports={data:{dictionaryColumns:[{title:"序号",width:"80px",align:"center",ellipsis:!0,scopedSlots:{customRender:"index"}},{title:"事件名称",align:"center",dataIndex:"eventName",ellipsis:!0},{title:"事件代码",align:"center",dataIndex:"eventCode",ellipsis:!0},{title:"事件类型",align:"center",dataIndex:"eventTypeName",ellipsis:!0,scopedSlots:{customRender:"eventType"}},{title:"关联警报数",align:"center",dataIndex:"alarmTotal",ellipsis:!0},{title:"操作",align:"center",width:"320px",scopedSlots:{customRender:"operation"}}],adddictionaryColumns:[{title:"序号",scopedSlots:{customRender:"index2"},width:"3%",align:"center"},{title:"属性名称",dataIndex:"name",width:"10%",align:"center",scopedSlots:{customRender:"name"}},{title:"属性代码",dataIndex:"code",width:"10%",align:"center",scopedSlots:{customRender:"code"}},{title:"属性描述",dataIndex:"remark",width:"40%",align:"center",scopedSlots:{customRender:"remark"}},{title:"操作",dataIndex:"operation",width:"15%",align:"center",scopedSlots:{customRender:"operation"}}]}}},gWaP:function(e,t){}});