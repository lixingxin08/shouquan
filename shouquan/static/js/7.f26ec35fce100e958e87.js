webpackJsonp([7],{"+C+Q":function(t,e){},"8EjB":function(t,e){t.exports={data:{dictionaryColumns:[{title:"序号",width:"80px",dataIndex:"index",align:"center",ellipsis:!0,scopedSlots:{customRender:"index"}},{title:"字典名称",align:"center",ellipsis:!0,dataIndex:"className"},{title:"字典代码",align:"center",ellipsis:!0,dataIndex:"classCode"},{title:"字典等级",align:"center",ellipsis:!0,dataIndex:"grade"},{title:"上级名称",align:"center",ellipsis:!0,dataIndex:"parentName"},{title:"上级代码",align:"center",ellipsis:!0,dataIndex:"parentCode"},{title:"子节点数",align:"center",ellipsis:!0,dataIndex:"childTotal"},{title:"数值个数",align:"center",ellipsis:!0,dataIndex:"valueTotal"},{title:"操作",align:"center",width:"160px",ellipsis:!0,scopedSlots:{customRender:"operation"}}],adddictionaryColumns:[{title:"数值名称",dataIndex:"className",width:"25%",align:"center",scopedSlots:{customRender:"className"}},{title:"数值代码",dataIndex:"classCode",width:"25%",align:"center",scopedSlots:{customRender:"classCode"}},{title:"数值描述",dataIndex:"remark",width:"25%",align:"center",scopedSlots:{customRender:"remark"}},{title:"操作",dataIndex:"operation",width:"25%",align:"center",scopedSlots:{customRender:"operation"}}]}}},"9DSR":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),r=a("exGp"),s=a.n(r),d=a("c/w/"),c=a("8EjB"),o=a.n(c),l={data:function(){return{dictionaryColumns:o.a.data.dictionaryColumns,dictonaryList:[],dicName:"",pagination:{total:0,size:"default",current:1,pageSize:20,showSizeChanger:!0,pageSizeOptions:["10","20","30","40"],showQuickJumper:!0},parentItem:null,pageSize:20,pageIndex:1}},methods:{handleTableChange:function(t){this.pageSize=t.pageSize,this.pageIndex=t.current,this.pagination.page=t.current,this.pagination.current=t.current,this.pagination.pageSize=t.pageSize,this.getDictionnaryData()},cleanTxt:function(){this.dicName="",this.dicCode="",this.getDictionnaryData()},getDictionnaryInfo:function(t){this.parentItem=t,this.getDictionnaryData()},getDictionnaryData:function(){var t=this;return s()(n.a.mark(function e(){var a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={keyword:t.dicName,parentId:t.parentItem.id,pageSize:t.pageSize,pageIndex:t.pageIndex},e.next=3,t.$http.post(t.$api.dictionarypage,a);case 3:"10000"==(i=e.sent).data.resultCode?(t.dictonaryList=i.data.data.list,1==t.pagination.current&&(t.pagination.total=i.data.data.length),t.$forceUpdate()):t.dictonaryList=[];case 5:case"end":return e.stop()}},e,t)}))()},add:function(){this.$router.push({path:"/adddictionary",query:{add:!0,dictid:this.parentItem.id}})},confirm:function(t){var e=this;return s()(n.a.mark(function a(){var i,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={dictionaryId:t.dictionaryId},a.next=3,e.$http.post(e.$api.dictionaryremove,i);case 3:1e4==(r=a.sent).data.resultCode?(e.$message.success(r.data.resultMsg),e.getDictionnaryData()):e.$message.error(r.data.resultMsg),e.$emit("refreshtree");case 6:case"end":return a.stop()}},a,e)}))()},editDictionary:function(t){this.$router.push({path:"/adddictionary",query:{add:!1,dictid:t.dictionaryId}})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content2"},[a("div",{staticClass:"flexrow flexac flexsb",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"flexrow flexac"},[a("div",{staticClass:"title_tx"},[t._v("字典名称:")]),t._v(" "),a("a-input",{attrs:{placeholder:"请输入字典名称"},model:{value:t.dicName,callback:function(e){t.dicName=e},expression:"dicName"}}),t._v(" "),a("a-button",{staticClass:"title_btn",attrs:{type:"primary"},on:{click:t.getDictionnaryData}},[t._v("查询")]),t._v(" "),a("a-button",{on:{click:t.cleanTxt}},[t._v("清除")])],1),t._v(" "),a("a-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新增")])],1),t._v(" "),a("a-table",{attrs:{scroll:{y:700},columns:t.dictionaryColumns,"data-source":t.dictonaryList,bordered:"",size:"small",pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"index",fn:function(e,a,i){return[t._v(t._s(i+1+10*(t.pagination.current-1)))]}},{key:"operation",fn:function(e,i){return[a("div",{staticClass:"flexrow flexac flexjc"},[a("a-popconfirm",{attrs:{title:"确定删除？","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(e){return t.confirm(i)}}},[a("a",{staticStyle:{color:"#FF0000","font-size":"12px"},attrs:{href:"#"}},[t._v("删除")])]),t._v(" "),a("div",{staticStyle:{height:"20px",width:"1px","background-color":"#e5e5e5","margin-left":"20px","margin-right":"20px"}}),t._v(" "),a("a",{staticStyle:{"font-size":"12px"},attrs:{href:"#"},on:{click:function(e){return t.editDictionary(i)}}},[t._v("编辑")])],1)]}}])})],1)},staticRenderFns:[]};var p=a("VU/8")(l,u,!1,function(t){a("RuqA")},null,null).exports,h={components:{isLeft:d.a,isList:p},data:function(){return{showtree:!1,treedata:null,isselectdata:"",replaceFields:{title:"name",key:"id"},defaultExpandedKeys:[],data:""}},created:function(){this.getdictionarytree()},methods:{addDictionary:function(){this.isShowAddDictionary=!this.isShowAddDictionary},getdictionarytree:function(){var t=this;return s()(n.a.mark(function e(){var a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.showtree=!1,a={},e.next=4,t.$http.post(t.$api.dictionarytree,a);case 4:"10000"==(i=e.sent).data.resultCode&&(t.data=i.data.data),t.setdata(),t.showtree=!0,console.log(t.treedata),t.getselectdata(t.treedata[0]);case 10:case"end":return e.stop()}},e,t)}))()},toTree:function(t){var e=[];if(!Array.isArray(t))return e;t.forEach(function(t){delete t.children});var a={};return t.forEach(function(t){a[t.id]=t}),t.forEach(function(t){var i=a[t.pid];i?(i.children||(i.children=[])).push(t):e.push(t)}),e},setdata:function(){for(var t=0;t<this.data.length;t++)1==this.data[t].open&&this.defaultExpandedKeys.push(this.data[t].id);this.treedata=this.toTree(this.data)},getselectdata:function(t){this.isselectdata=t,t&&console.log(t),this.$refs.dictionarylist.getDictionnaryInfo(t)}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"administrativedivision flex_fs"},[a("div",{staticClass:"isleft"},[t.showtree?a("is-left",{attrs:{treedata:t.treedata,replaceFields:t.replaceFields,defaultExpandedKeys:t.defaultExpandedKeys},on:{selectdata:t.getselectdata}}):t._e()],1),t._v(" "),a("div",{staticClass:"flexcolumn",staticStyle:{width:"100%",padding:"20px"}},[a("is-list",{directives:[{name:"show",rawName:"v-show",value:t.isselectdata,expression:"isselectdata"}],ref:"dictionarylist",on:{refreshtree:t.getdictionarytree}})],1)])},staticRenderFns:[]};var g=a("VU/8")(h,f,!1,function(t){a("+C+Q")},"data-v-15ddd2b9",null);e.default=g.exports},RuqA:function(t,e){}});